$headerHeight: 70px;
$headerVPadding: 20px;
$headerHPadding: 30px;
$headerInnerHeight: $headerHeight - (2 * $headerVPadding);

$subNavHeight:55px;
$mobileBP: 730px;

@mixin header-link() {
    font-size:15px;
    font-weight:200;
    color:$charcoal;
    
    padding:23px 15px;

    display: inline-block;
    
    @include transition(background-color 0.3s);
    
    &:hover,&.selected {
        background-color:$darkYellow;
        text-decoration: none;
    }
}

body {
    background-color:$darkGray;
}

@media screen and (max-width:$mobileBP) {
    // remove notificaiton bar on mobile
    body {
        padding-top:0 !important;
    }
    .mtsnb {
        display: none;
    }
}

.template {
    display: none;
}

#header-container {
    #header-pad {
        width:100%;
        height:$headerHeight;
        display: none;
    }
    
    #header.no-banner.fixed + #header-pad {
        display: block;
    }
    
    #top-banner {
        min-height: 120px;
        background-color: $darkGray;
        padding: 15px 0;

        .headerAd {
            margin: 0 auto;
            max-width: 970px;
            text-align: center;
        }
    }

    #header {
        width:100%;
        height: $headerHeight;
        background-color: $yellow;
        position: relative;
        z-index: 300;
        
        &.fixed {
            position:fixed;
            top:0;
            z-index: 8888;
        }

        #header-left {
            width:100%;
            height:$headerHeight;
            float: left;
            
            background-color:$yellow;

            #logo {
                width:auto;

                height:$headerHeight;   

                padding: $headerVPadding $headerHPadding;

                float:left;

                img {
                    width:auto;
                    height:$headerInnerHeight;
                }
            }
            
            .sub-menu {
                z-index: -1;
                                        
                top:$headerHeight;
                
                @include transition(top 0.3s);
                
                width:100%;
                height:$subNavHeight;
                
                position: absolute;
                left:0;
                
                list-style: none;
                padding:0;
                margin:0;
                
                display: block;
                text-align: center;
                
                background-color:$darkYellow;
                
                white-space: nowrap;
                overflow: hidden;
                overflow-y: hidden;
                overflow-x: auto;
                
                &.has-sub-nav-logo {
                    padding-left:135px;
                }
                
                .sub-nav-logo {
                    width:100px;
                    height:auto;
                    
                    position: absolute;
                    left:25px;
                    top:50%;
                    
                    margin-top:-7px;
                    
                }
                @media screen and (max-width:855px) {
                    &.has-sub-nav-logo {
                        padding-left:110px;
                    }
                    .sub-nav-logo {
                        left:20px;
                    }
                }
            
                & ul > li {
                    position: relative;
                    display: inline-block;
            
                    margin:0 5px;
            
                    &:not(.menu-btn) > a {
                        @include header-link();
                        
                        padding-top:15px;
                        padding-bottom:12px;
                        
                        border-bottom:4px solid $darkYellow;
                        
                        @include transition(border-bottom 0.3s);
                    }
                    
                    &:not(.menu-btn) > a:hover, &.current_page_item > a, &.current-menu-item > a {
                        border-bottom:4px solid $black;
                    }
                    
                    &.all-sectors {
                        a {
                            font-weight: 600;
                        }
                    }
                }
            }

            #primary-nav {
                width:auto;
                height:$headerHeight;

                float: left;

                margin-left:40px;

                & > #navigation-menu {
                    width:auto;
                    height:$headerHeight;

                    list-style: none;
                    margin:0;

                    & > li {
                        display: inline-block;

                        margin:0 5px;

                        & > a {
                            @include header-link();
                            
                            .ddCarrot {
                                display: inline;
                                margin-left:10px;
                            }
                        }

                        .sub-menu {
                            top:0;
                        }

                        &:hover,&.selected {
                            & > a {
                                background-color:$darkYellow;                            
                            }
                            
                            .sub-menu {
                                top:$headerHeight;
                            }
                        }
                    }
                }
            }
        }

        #header-right {
            position:absolute;
            top:0;
            right:0;

            width:auto;
            height:auto;
            
//             overflow: hidden;
            
            background-color:$yellow; // for when search overlaps
            
            #header-social {
                display: inline-block;
                vertical-align: top;

                padding:23px 0 20px 0;

                .social-btn {
                    display: inline-block;
                    vertical-align: middle;
                    margin:0 10px;

                    a {
                        color:rgba(0, 0, 0, 0.65);
                        font-size:23px;
                        
                        @include transition(color 0.3s);

                        &:hover {
                            color:rgba(0, 0, 0, 0.8);
                        }
                    }
                }
            }

            #header-sign-in {
                vertical-align: top;
                display: inline-block;

                margin:0 20px;

                a {
                    @include header-link();
                }
                
                .header-text {
                    padding:23px 0;
                    color:#000;
                    font-size:15px;
                }
            }
            
            #header-sign-in-with-popover {
                vertical-align: top;
                display: inline-block;
                
                position: relative;

                margin:0 0 0 20px;
                
                .overlay {
                    position: fixed;
                    top:0;
                    left:0;
                    width: 100%;
                    height:100%;
                    background-color:rgba($white,0);
                    
                    @include transition(0.3s);
                    
                    pointer-events: none;
                }
                
                .popover {
                    position: absolute;
                    width: 250px;
                    right: -30px;
                    margin-top: 15px;
                    padding: 20px 15px 15px;
                    background-color: #58585a;
                    
                    visibility: hidden;
                    
                    @include opacity(0);
                    @include transition(0.3s);

                    -webkit-box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.4);
                    -moz-box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.4);
                    box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.4);
    
                    &:after {
                    	bottom: 100%;
                        right: 60px;
                        border: solid transparent;
                        content: " ";
                        height: 0;
                        width: 0;
                        position: absolute;
                        pointer-events: none;
                        border-bottom-color: #58585a;
                        border-width: 10px;
                    }
                    
                    &.green-arrow:after {
                        border-bottom-color: $deepGreen;
                    }
                }
                
                .shopping-cart.isOpen, .sign-in.isOpen {
                    background:none;
                    
                    .popover {
                        @include opacity(1);
                        visibility: visible;
                    }
                    
                    & + .overlay {
                        background-color:rgba($white,0.4);
                        
                        pointer-events: auto;
                
                        -webkit-backdrop-filter: blur(4px);
                        backdrop-filter: blur(4px);
                    }
                }
                
                .shopping-cart {
                    display: inline-block;
                    padding: 0 15px;
                    
                    position: relative;
                    z-index: 10;
                    vertical-align: middle;
                    
                    .cart-btn {
                        font-size:22px;
                        font-weight: 200;
                        color:rgba(0, 0, 0, 0.65);
                        position: relative;
                                         
                        &:hover {
                            color:#252525;
                            text-decoration: none;
                        }
                        
                        .badge {
                            background-color:#595417;
                            border:1px solid $yellow;
                            @include border-radius(50%);
                            position: absolute;
                            top: -2px;
                            right: -5px;
                            width: 15px;
                            height: 15px;
                            padding: 0;
                            font-size: 8px;
                            padding-top:2px;
                            display: none;
                        }
                    }
                    
                    .popover {
                        width:300px;
                        margin-top:24px;
                        right:-42px;
                        
                        background-color:$white;
                        
                        padding:0;
                        
                        .items {
                            padding:15px;
                            max-height: 50vh;
                            overflow-y:auto;
                            border:3px solid #58585a;
                            
                            .no-items {
                                display: none;
                            }
                            
                            .cart-item {
                                
                                margin-top:10px;
                                padding-top:10px;
                                border-top:1px solid $lightGray;
                                
                                &:first-child {
                                    margin-top:0;
                                    padding-top:0;
                                    border-top:none;
                                }
                                
                                .photo {
                                    width:100px;
                                    height:100px;
                                    overflow: hidden;
                                    
                                    float:left;
                                    margin-right:15px;
                                    
                                    img {
                                        height:100%;
                                        max-width: none;
                                    }
                                }
                                
                                .item-details    {
                                    width:calc(100% - 115px);
                                    float:right;
                                }
                                
                                .item-name h3 {
                                    font-size:12px;
                                    line-height: normal;
                                    margin:0;
                                }
                                
                                .item-price {
                                    margin:5px 0;
                                    font-size:12px;
                                }
                            }
                        }
                        
                        .chin {
                            background-color:#58585a;
                            color:#fff;
                            
                            .total {
                                padding:8px 15px;
                            }
                            
                            .buttons {
                                font-size:0;
                                
                                .btn {
                                    font-size: 12px;
                                    width:50%;
                                }
                            }
                        }
                    }
                }
                
                .sign-in {
                    display: inline-block;
                    padding: 0 15px;
                    
                    position: relative;
                    z-index: 10;
                    
                    .sign-in-btn {
                        font-size: 15px;
                        font-weight: 200;
                        color: #252525;
                    
                        &:hover {
                            color:#252525;
                            text-decoration: none;
                        }
                    }
                    
                    .my-account-btn {
                        color:rgba(0, 0, 0, 0.65);
                    }
                }
                
                &.my-account {
                    margin:0 0 0 20px;
                    
                    #sign-in-popover {
                        padding:0;
                        width:200px;
                        
                        p {
                            color:#fff;
                            text-align:center;
                            font-size:12px;
                            margin-top:5px;
                        }
                        
                        &:after {
                            right: 40px;
                        }
                        
                        #my-account-menu { 
                            list-style: none;
                            padding: 0;
                            text-align: center;
                            margin-bottom:0;
                            
                            li {
                                a {
                                    color:#fff;
//                                     font-family: 'tradegothic',sans-serif;
                                    font-size:16px;
                                    display: block;
                                    padding:12px 0 10px 0;
//                                     text-transform: uppercase;
                                    
                                    &:hover {
                                        background-color:$deepGreen;
                                        text-decoration: none;
                                    }
                                }
                            }
                        }
                    }
                    
                    .sign-in {
                        padding:15px 0;
                    }
                }
            }
            
            #search {
                padding:$headerVPadding $headerHPadding $headerVPadding 0;
                height:$headerHeight;
    
                display: inline-block;
                vertical-align: top;
                
                margin-right:-170px;
                margin-left:20px;
                @include transition(margin 0.4s);
                
                #search-container {
                    @include transition(border 0.4s);
                    border-bottom:1px solid $yellow;
                }
                    
                #search-trigger {
                    color:rgba(0, 0, 0, 0.65);
                    font-size:19px;
                    padding:5px 0;
                    cursor: pointer;
                    
                    display: inline-block;
                }
    
                #search-form {
                    display: inline-block;
                    
                    input[type=search] {
                        border:0;
                        background:none;
                        -webkit-appearance: none;
                        outline:none;
                        color:$black;
                        padding:0 5px;
                        font-size: 14px;
                        width:150px;
                    }
                    input[type=button] {
                        border:0;
                        background:none;
                        -webkit-appearance: none;
                        outline:none;
                        color:rgba(0, 0, 0, 0.65);
                        padding: 0;
                        font-size:30px;
                        margin: 0;
                        vertical-align: bottom;
                        display: inline-block;
                    }
                }
            }
        
            &.open {
                right:0;
                
                #search {
                    margin-right:0;
                    
                    #search-container {
                        border-bottom:1px solid $black;
                    }
                }
            }
        }
        
        #mobileMenuBtn {
            display: none;
        }
        
        #mobile-menu {
            display: none;
        }
    }

    @media screen and (min-width:$mobileBP + 1) {

        &.has-sub-nav {
            #header-pad {
                height:$headerHeight + $subNavHeight;
            }
            #header {
                height:$headerHeight + $subNavHeight;
            }
        }   
    } 
    
    @media screen and (max-width:1110px) {
        // strink the spacing between logo and nav
        
        #header {
            #header-left {
                #logo {
                    padding-right:10px;
                }
                
                #primary-nav {
                    margin-left:0;
                }
            }
        }
    }
    
    @media screen and (max-width:1060px) {
        // strink the spacing between logo and nav more and shrink the space between the primary nav items
        
        #header {
            #header-left {
                #primary-nav {
                    #navigation-menu {
                        padding:0;
                        
                        li {
                            margin:0;
                        }
                    }
                }
            }
            #header-right #header-sign-in {
                margin:0 5px;
            }
        }
    }
    
    @media screen and (max-width:950px) {
        #header #header-left #primary-nav > #navigation-menu > li > a {
//             padding: 28px 10px;
            font-size:14px;
        }
        #header #header-right #header-social .header-social-btn {
            margin:0 5px;
        }
    }
    
    @media screen and (max-width:930px) {
        #header #header-right #header-social .social-btn {
            margin:0 5px;
        }
        
        #header #header-right #search {
            margin-left:5px;
            margin-right: -190px;
        }
    }
    
    @media screen and (max-width:855px) {
        #header {
            #header-left {
                #logo {
                    padding-left:15px;
                }
                #primary-nav > #navigation-menu > li > a {
                    padding: 23px 10px;
                    font-size:13px;
                }
            }
            #header-right #header-sign-in a {
                font-size:13px;
            }
        }
        
    }  
      
    @media screen and (max-width:780px) {
        #header #header-left #primary-nav > #navigation-menu > li > a {
            font-size:12px;
        }
    }

    
    @media screen and (max-width:$mobileBP) {
        #header-right, #primary-nav {
            display:none;
        }
        
        #header {
            
            #mobile-menu {
                position: fixed;
                top:0;
                left:0;
                right:0;
                bottom:0;
                background-color:rgba(0, 0, 0, 0.8);
                padding:$headerHeight 30px 30px 30px;
                z-index: 9999999;
                
                
                overflow-y: auto;
                text-align: center;
                
                ul {
                    list-style: none;
                    padding:0;
                    
                    li {
                        a {
                            color:#fff;
                            font-family: 'tradegothic',sans-serif;
                            font-size:35px;
                            
                            &:hover {
                                color:$yellow;
                                text-decoration: none;
                            }
                        }
                        margin:20px 0;
                    }
                }
            }
            
            #mobileMenuBtn {
                display: block;
                
                width:30px;
                height:25px;
                
                position: absolute;
                right:10px;
                top:50%;
                z-index: 999999999;
                
                transform:translate(0,-50%);
                
                cursor: pointer;
                
                .top-line, .middle, .bottom-line {
                    position: absolute;
                    left:0;
                    width: 100%;
                }
                .top-line, .middle-line, .bottom-line {
                    height:4px;
                    background-color:#000;    
                }
                .top-line {
                    top:0;
                    @include transition(all 0.5s);
                }
                .bottom-line {
                    bottom:0;
                    @include transition(all 0.5s);
                }
                .middle {
                   top:50%;
                   transform:translate(0,-50%);
                   @include transition(all 0.5s);

                   .middle-line {
                       width:60%;
                       float:left;
                   }
                   
                   .middle-dot {
                       width:5px;
                       height:5px;
                       border-radius: 50%;
                       background-color: #000;
                       float:left;
                       margin-left:4px;
                   }
                   
                }
            
                &.open {
                    .top-line, .bottom-line {
                        background-color:#fff;    
                    }
                    .top-line {
                        @include rotate(-45deg);
                        top:10px;
                    }
                    .bottom-line {
                        @include rotate(45deg);
                        bottom:10px;
                    }
                    .middle {
                        @include opacity(0);
                    }
                }
            }
        }
    }
}
    