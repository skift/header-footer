$headerHeight: 70px;
$headerVPadding: 20px;
$headerHPadding: 30px;
$headerInnerHeight: $headerHeight - (2 * $headerVPadding);

$subNavHeight:55px;

$mobileBP: 730px;

@mixin header-link() {
    font-size:15px;
    font-weight:200;
    color:$charcoal;
    
    padding:23px 15px;

    display: inline-block;
    
    @include transition(background-color 0.3s);
    
    &:hover,&.selected {
        background-color:$darkYellow;
        text-decoration: none;
    }
}

body {
    background-color:$darkGray;
}

@media screen and (max-width:$mobileBP) {
    // remove notificaiton bar on mobile
    body {
        padding-top:0 !important;
    }
    .mtsnb {
        display: none;
    }
}

#header-container {
    #header-pad {
        width:100%;
        height:$headerHeight;
        display: none;
    }
    
    #header.no-banner.fixed + #header-pad {
        display: block;
    }
    
    #top-banner {
        min-height: 120px;
        background-color: $darkGray;
        padding: 15px 0;

        .headerAd {
            margin: 0 auto;
            max-width: 970px;
            text-align: center;
        }
    }

    #header {
        width:100%;
        height: $headerHeight;
        background-color: $yellow;
        position: relative;
        z-index: 300;
        
        &.fixed {
            position:fixed;
            top:0;
            z-index: 8888;
        }

        #header-left {
            width:100%;
            height:$headerHeight;
            float: left;
            
            background-color:$yellow;

            #logo {
                width:auto;

                height:$headerHeight;   

                padding: $headerVPadding $headerHPadding;

                float:left;

                img {
                    width:auto;
                    height:$headerInnerHeight;
                }
            }
            
            .sub-menu {
                z-index: -1;
                                        
                top:$headerHeight;
                
                @include transition(top 0.3s);
                
                width:100%;
                height:$subNavHeight;
                
                position: absolute;
                left:0;
                
                list-style: none;
                padding:0;
                margin:0;
                
                display: block;
                text-align: center;
                
                background-color:$darkYellow;
                
                white-space: nowrap;
                overflow-x: auto;
            
                & > li {
                    position: relative;
                    display: inline-block;
            
                    margin:0 5px;
            
                    & > a {
                        @include header-link();
                        
                        padding-top:15px;
                        padding-bottom:12px;
                        
                        border-bottom:4px solid $darkYellow;
                        
                        @include transition(border-bottom 0.3s);
                    }
                    
                    & > a:hover, &.current_page_item > a {
                        border-bottom:4px solid $black;
                    }
                    
                    &.all-sectors {
                        a {
                            font-weight: 600;
                        }
                    }
                }
            }

            #primary-nav {
                width:auto;
                height:$headerHeight;

                float: left;

                margin-left:40px;

                & > #navigation-menu {
                    width:auto;
                    height:$headerHeight;

                    list-style: none;
                    margin:0;

                    & > li {
                        display: inline-block;

                        margin:0 5px;

                        & > a {
                            @include header-link();
                            
                            .ddCarrot {
                                display: inline;
                                margin-left:10px;
                            }
                        }

                        .sub-menu {
                            top:0;
                        }

                        &:hover,&.selected {
                            & > a {
                                background-color:$darkYellow;                            
                            }
                            
                            .sub-menu {
                                top:$headerHeight;
                            }
                        }
                    }
                }
            }
        }

        #header-right {
            position:absolute;
            top:0;
            right:0;

            width:auto;
            height:auto;
            
            overflow: hidden;
            
            background-color:$yellow; // for when search overlaps
            
            #header-social {
                display: inline-block;
                vertical-align: top;

                padding:23px 0 20px 0;

                .social-btn {
                    display: inline-block;
                    vertical-align: middle;
                    margin:0 10px;

                    a {
                        color:rgba(0, 0, 0, 0.65);
                        font-size:23px;
                        
                        @include transition(color 0.3s);

                        &:hover {
                            color:rgba(0, 0, 0, 0.8);
                        }
                    }
                }
            }

            #header-sign-in {
                vertical-align: top;
                display: inline-block;

                margin:0 20px;

                a {
                    @include header-link();
                }
                
                .header-text {
                    padding:23px 0;
                    color:#000;
                    font-size:15px;
                }
            }
            
            #search {
                padding:$headerVPadding $headerHPadding $headerVPadding 0;
                height:$headerHeight;
    
                display: inline-block;
                vertical-align: top;
                
                margin-right:-170px;
                margin-left:20px;
                @include transition(margin 0.4s);
                
                #search-container {
                    @include transition(border 0.4s);
                    border-bottom:1px solid $yellow;
                }
                    
                #search-trigger {
                    color:rgba(0, 0, 0, 0.65);
                    font-size:19px;
                    padding:5px 0;
                    cursor: pointer;
                    
                    display: inline-block;
                }
    
                #search-form {
                    display: inline-block;
                    
                    input[type=search] {
                        border:0;
                        background:none;
                        -webkit-appearance: none;
                        outline:none;
                        color:$black;
                        padding:0 5px;
                        font-size: 14px;
                        width:150px;
                    }
                    input[type=button] {
                        border:0;
                        background:none;
                        -webkit-appearance: none;
                        outline:none;
                        color:rgba(0, 0, 0, 0.65);
                        padding: 0;
                        font-size:30px;
                        margin: 0;
                        vertical-align: bottom;
                        display: inline-block;
                    }
                }
            }
        
            &.open {
                right:0;
                
                #search {
                    margin-right:0;
                    
                    #search-container {
                        border-bottom:1px solid $black;
                    }
                }
            }
        }
        
        #mobileMenuBtn {
            display: none;
        }
        
        #mobile-menu {
            display: none;
        }
    }

    @media screen and (min-width:$mobileBP + 1) {

        &.has-sub-nav {
            #header-pad {
                height:$headerHeight + $subNavHeight;
            }
            #header {
                height:$headerHeight + $subNavHeight;
            }
        }   
    } 
    
    @media screen and (max-width:1080px) {
        // strink the spacing between logo and nav
        
        #header {
            #header-left {
                #logo {
                    padding-right:10px;
                }
                
                #primary-nav {
                    margin-left:0;
                }
            }
        }
    }
    
    @media screen and (max-width:1010px) {
        // strink the spacing between logo and nav more and shrink the space between the primary nav items
        
        #header {
            #header-left {
                #primary-nav {
                    #navigation-menu {
                        padding:0;
                        
                        li {
                            margin:0;
                        }
                    }
                }
            }
            #header-right #header-sign-in {
                margin:0 5px;
            }
        }
    }
    
    @media screen and (max-width:925px) {
        #header #header-left #primary-nav > #navigation-menu > li > a {
//             padding: 28px 10px;
            font-size:14px;
        }
        #header #header-right #header-social .header-social-btn {
            margin:0 5px;
        }
    }
    
    @media screen and (max-width:820px) {
        #header {
            #header-left {
                #primary-nav > ul > li > a {
                    padding-left:8px;
                    padding-right:8px;
                    font-size:13px;
                }
            }
            #header-right #header-sign-in a {
                font-size:13px;
            }
        }
        
        #header #header-right #header-social {
            width: 80px;
            text-align: center;
            padding: 8px 0;
        }
    }
    
    @media screen and (max-width:780px) {
        #header #header-right #search {
            margin-left:0;
            margin-right: -190px;
        }
    }
    
    @media screen and (max-width:$mobileBP) {
        #header-right, #primary-nav {
            display:none;
        }
        
        #header {
            
            #mobile-menu {
                position: fixed;
                top:0;
                left:0;
                right:0;
                bottom:0;
                background-color:rgba(0, 0, 0, 0.8);
                padding:$headerHeight 30px 30px 30px;
                z-index: 9999999;
                
                
                overflow-y: auto;
                text-align: center;
                
                ul {
                    list-style: none;
                    padding:0;
                    
                    li {
                        a {
                            color:#fff;
                            font-family: 'tradegothic',sans-serif;
                            font-size:35px;
                            
                            &:hover {
                                color:$yellow;
                                text-decoration: none;
                            }
                        }
                        margin:20px 0;
                    }
                }
            }
            
            #mobileMenuBtn {
                display: block;
                
                width:30px;
                height:25px;
                
                position: absolute;
                right:10px;
                top:50%;
                z-index: 999999999;
                
                transform:translate(0,-50%);
                
                cursor: pointer;
                
                .top-line, .middle, .bottom-line {
                    position: absolute;
                    left:0;
                    width: 100%;
                }
                .top-line, .middle-line, .bottom-line {
                    height:4px;
                    background-color:#000;    
                }
                .top-line {
                    top:0;
                    @include transition(all 0.5s);
                }
                .bottom-line {
                    bottom:0;
                    @include transition(all 0.5s);
                }
                .middle {
                   top:50%;
                   transform:translate(0,-50%);
                   @include transition(all 0.5s);

                   .middle-line {
                       width:60%;
                       float:left;
                   }
                   
                   .middle-dot {
                       width:5px;
                       height:5px;
                       border-radius: 50%;
                       background-color: #000;
                       float:left;
                       margin-left:4px;
                   }
                   
                }
            
                &.open {
                    .top-line, .bottom-line {
                        background-color:#fff;    
                    }
                    .top-line {
                        @include rotate(-45deg);
                        top:10px;
                    }
                    .bottom-line {
                        @include rotate(45deg);
                        bottom:10px;
                    }
                    .middle {
                        @include opacity(0);
                    }
                }
            }
        }
    }
}
